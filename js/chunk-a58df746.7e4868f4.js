(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a58df746"],{"0f9d":function(t,e,n){"use strict";n("88a3")},2375:function(t,e,n){"use strict";var c=n("7a23"),a=function(t){return Object(c["x"])("data-v-6893ef9d"),t=t(),Object(c["v"])(),t},r={class:"spinner"},u=a((function(){return Object(c["g"])("div",{class:"bouncing-loader"},[Object(c["g"])("div"),Object(c["g"])("div"),Object(c["g"])("div")],-1)})),i=[u];function s(t,e){return Object(c["u"])(),Object(c["f"])("div",r,i)}n("0f9d");var o=n("6b0d"),A=n.n(o);const b={},O=A()(b,[["render",s],["__scopeId","data-v-6893ef9d"]]);e["a"]=O},2584:function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAkCAYAAADhAJiYAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAFWSURBVHgB7ZbBTYRQEIZnlo0edzuQEtYOdgswMCFr4pEOsAKhAu1g9WRiQsa1Ae1AS9gSjDcTYXyDcPYBj8SY950ImZB/3vz/GwA8Ho/H88+5Zw7LJ87AEQgjeGBezQNk8xhWKJvtGb3ASGYwkJI5M2JeVYyAXLoQoww6oXK/v0aUDAQOOJOUHIlR5n2Kd8zLRTMiWTdiatlQRAdwiPXI1LyLnxGta5E7I+aUyK0YxWpkKuY4wGdQ84oU24hymAirkR0FEENn3ohu9F3roxgskUqKhOj2t7peHgKZnXSPCDVKj1CY2nebOqsPsjGzdBEXzJMoKmAirDs0okJpfWS6ffyoJE2JrLqeRFAragkB7oygWGP/aWJ/4ThpAy9GzhHxSkV91ULnRG/giEGrIzGx18SZdkJdH7pGwBGjlqsZ4Ura5YpVc1E6O6nBsOPfD4/H4/H8db4BQWqHsZg/ry8AAAAASUVORK5CYII="},"28ae":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAAUCAYAAACAl21KAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAJ3SURBVHgBhVRNThtRDPbzG+gUlTKLLiqRwPQGWUCJKqjesrumu+4IJyCcgHCChhMAR+gNXpAqUWARlt1Nqiza3aC2SVRmnmunyTAJSbA0f7bfN7Y/2wpyUtjYNohoQEEAxBdAlLcP9CyOr0Rh48eFje5NQ1krvz0EQIU+NCJrY5gjoTGB60PNOUedy/OjDEhAELAZXVgr3wE7Bv1+MA0k9v04Hv6oWDZVcm5dwNTLsgk9B9XOpa3L+4KjT0pRmxy2pgEpdCVOO/6LeCqpcRB1l6D1PHI1RqyJ0wLRiV5SHyLbnJ8a/3CRiEsBe+hjA7quhvfGbQPkjh+rjwiXICKnmoUNY8TfMQkZUJp6oca7qemsbpqSHMrrtE4ipdJQ3pEZRr7NjUBANILpXP8nYiR36I2d8+aBFF+bilIQfv9qG/CIZEAaoOXoyWFxc6cp36TUOrNXYXqPWVedPKgSF6LWpw+Aoivb4kY7gL7O988ZF2NqBOBDnCdmLLWk5+oK1Mqvp+ognsGeNOtyl06gN6jt3kg/Rj+C2udWry7/SSswQ5a7qeG6VcQvZCKyiNxwEMH3WqrrBvXh3O0sIL2kLfXoBoji6KqZtYs3on+YrxkZZFzkOZpw2Qy/n3mtoV9pDJ1Z0c9XXwVBcW3rttO+ydteFMIAKa2sFMKPK4X1dwrB//nl3E5GuLa1UyNF34bTb+qyEhLEs/yOmSdhuRwmbnFXVo8MfLaPwjemlCYyiHSrOFSuQXsaALGr2Nkj4PuRtM2gRpmH41qR+6w1RUniQee6aadHsm3ELh2vdT9rkYx+aTBA3E2d3ve8iRWbF2YXNe2Covey5Ebqfzv2GeXWxvWMAAAAAElFTkSuQmCC"},"88a3":function(t,e,n){},bec1:function(t,e,n){"use strict";n.r(e);var c=n("7a23"),a=n("2584"),r=n.n(a),u=n("28ae"),i=n.n(u),s=function(t){return Object(c["x"])("data-v-8fb781c4"),t=t(),Object(c["v"])(),t},o={class:"sequence"},A={class:"basic-info"},b={class:"wrapper"},O={class:"city-route"},p=s((function(){return Object(c["g"])("img",{src:r.a,alt:"arrow pointing to the left"},null,-1)})),d=[p],j={class:"wrapper"},g=s((function(){return Object(c["g"])("button",{class:"router-detail"},"...",-1)})),l={class:"route"},f={class:"route-tabs"},S=s((function(){return Object(c["g"])("img",{src:i.a,alt:"bus icon"},null,-1)})),v=s((function(){return Object(c["g"])("img",{src:i.a,alt:"bus icon"},null,-1)})),E={class:"route-sequence-list"},m={class:"stop"},h={class:"stop"};function R(t,e,n,a,r,u){var i=this,s=Object(c["B"])("Navbar"),p=Object(c["B"])("Spinner");return Object(c["u"])(),Object(c["f"])("div",o,[Object(c["g"])("header",null,[Object(c["i"])(s)]),Object(c["g"])("main",null,[Object(c["g"])("section",A,[Object(c["g"])("div",b,[Object(c["g"])("div",O,[Object(c["g"])("div",{class:"return",onClick:e[0]||(e[0]=function(t){return i.$router.go(-1)})},d),Object(c["g"])("span",null,Object(c["E"])(t.cityName)+"｜ "+Object(c["E"])(t.selectedRoute.RouteName.Zh_tw)+" 公車",1)]),Object(c["g"])("span",null,Object(c["E"])(r.timerSeconds)+"秒後更新",1)]),Object(c["g"])("div",j,[Object(c["g"])("h2",null,[Object(c["h"])(Object(c["E"])(t.selectedRoute.RouteName.Zh_tw)+" | ",1),Object(c["g"])("span",null,Object(c["E"])(t.selectedRoute.DestinationStopNameZh)+" - "+Object(c["E"])(t.selectedRoute.DepartureStopNameZh),1)]),g])]),Object(c["g"])("section",l,[Object(c["g"])("div",f,[Object(c["g"])("div",{onClick:e[1]||(e[1]=function(t){return r.currentTab="departure"}),class:"route-tab"},[S,Object(c["g"])("span",null,"往 "+Object(c["E"])(t.selectedRoute.DestinationStopNameZh),1)]),Object(c["g"])("div",{onClick:e[2]||(e[2]=function(t){return r.currentTab="return"}),class:"route-tab"},[v,Object(c["g"])("span",null," 往 "+Object(c["E"])(t.selectedRoute.DepartureStopNameZh),1)])]),Object(c["g"])("div",E,[t.isLoading?(Object(c["u"])(),Object(c["d"])(p,{key:0})):Object(c["e"])("",!0),(Object(c["u"])(!0),Object(c["f"])(c["a"],null,Object(c["A"])(u.depatureDataset,(function(t,e){return Object(c["J"])((Object(c["u"])(),Object(c["f"])("div",{key:e,class:"route-sequence-list-item"},[Object(c["g"])("span",{class:Object(c["q"])(["status",{approaching:0===u.getWaitingMinute(t.ETA),soon:u.getWaitingMinute(t.ETA)<2&&u.getWaitingMinute(t.ETA)>0,waiting:0===t.StopStatus&&u.getWaitingMinute(t.ETA)>=2,"out-of-service":0!==t.StopStatus}])},Object(c["E"])(u.getCurrentStopStatus(t)),3),Object(c["g"])("span",m,Object(c["E"])(t.StopName["Zh_tw"]),1)])),[[c["G"],"departure"===r.currentTab]])})),128)),(Object(c["u"])(!0),Object(c["f"])(c["a"],null,Object(c["A"])(u.returnDataset,(function(t,e){return Object(c["J"])((Object(c["u"])(),Object(c["f"])("div",{key:e,class:"route-sequence-list-item"},[Object(c["g"])("span",{class:Object(c["q"])(["status",{approaching:0===u.getWaitingMinute(t.ETA),soon:u.getWaitingMinute(t.ETA)<2&&u.getWaitingMinute(t.ETA)>0,waiting:0===t.StopStatus&&u.getWaitingMinute(t.ETA)>=2,"out-of-service":0!==t.StopStatus}])},Object(c["E"])(u.getCurrentStopStatus(t)),3),Object(c["g"])("span",h,Object(c["E"])(t.StopName["Zh_tw"]),1)])),[[c["G"],"return"===r.currentTab]])})),128))])])])])}var w=n("5530"),B=(n("d81d"),n("4de4"),n("d3b7"),n("d178")),N=n("2375"),T=n("5502"),C={name:"Sequence",components:{Navbar:B["a"],Spinner:N["a"]},data:function(){return{currentTab:"departure",timerSeconds:60,clearID:null}},computed:Object(w["a"])(Object(w["a"])(Object(w["a"])({},Object(T["c"])(["isLoading","selectedRoute","timeOfArrival"])),Object(T["b"])(["departureRouteSequence","returnRouteSequence","cityName"])),{},{depatureDataset:function(){var t=this,e=this.departureRouteSequence.map((function(e){var n=t.timeOfArrival.filter((function(t){return e.StopUID===t.StopUID}))[0];return Object(w["a"])(Object(w["a"])({},e),{},{StopStatus:n.StopStatus,ETA:n.EstimateTime})}));return e},returnDataset:function(){var t=this,e=this.returnRouteSequence.map((function(e){var n=t.timeOfArrival.filter((function(t){return e.StopUID===t.StopUID}))[0];return Object(w["a"])(Object(w["a"])({},e),{},{StopStatus:n.StopStatus,ETA:n.EstimateTime})}));return e}}),methods:{getWaitingMinute:function(t){return Math.floor(t/60)},getWaitingNotice:function(t){return 0===t?"進站中":t>0&&t<2?"即將進站":"".concat(t,"分鐘")},busStatus:function(t){var e={1:"尚未發車",2:"交管不停靠",3:"末班車已過",4:"今日未發車"};return e[t]},getCurrentStopStatus:function(t){if(0===t.StopStatus){var e=this.getWaitingMinute(t.ETA);return this.getWaitingNotice(e)}return this.busStatus(t.StopStatus)},updateBusStatus:function(){var t=this;this.clearID=window.setInterval((function(){if(t.timerSeconds--,0===t.timerSeconds)return clearInterval(t.clearID),t.$store.dispatch("getTimeOfArrival",t.selectedRoute),t.timerSeconds=60,t.updateBusStatus()}),1e3)},stopUpdate:function(){clearInterval(this.clearID)}},created:function(){this.updateBusStatus()},unmounted:function(){this.stopUpdate()}},I=(n("e6ef"),n("6b0d")),U=n.n(I);const W=U()(C,[["render",R],["__scopeId","data-v-8fb781c4"]]);e["default"]=W},e6ef:function(t,e,n){"use strict";n("f32c")},f32c:function(t,e,n){}}]);
//# sourceMappingURL=chunk-a58df746.7e4868f4.js.map